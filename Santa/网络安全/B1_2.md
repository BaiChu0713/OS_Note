# 网络基础

## 互联网概念
> 以一些标砖的网络协议相连的网络

- 局域网
  内网，小范围的私有网络
- 广域网
  遍及全世界的网络，又称外网/公网

##　网络协议

### 概念
> 计算机进行连接和通信时候需要遵循的规则

### HTTP协议
> 超文本传输协议

一种发布和接受HTML页面的方法

无状态保存的协议，协议本身不对请求和响应之间的通信状态进行保存

默认工作在**TCP协议80端口**，标准服务的打头是`http://`

发送内容的方式是明文，不提供任何数据加密。如果截取了传输报文，就可以直接读懂其中的信息。

#### 基本流程

1. 地址解析
2. 封装HTTP请求数据包
3. 分装成TCP包，建立TCP连接(三次握手)
4. 客户端发送请求命令
5. 服务器响应
6. 服务器关闭TCP连接

### HTTPS协议

#### 基本概念
> 一种透过计算机网络进行安全通信的传输协议

HTTPS 经由 HTTP 进行通信，但利用 SSL/TLS 来加密数据包。

HTTPS 开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。
- HTTPS 默认工作在**TCP 协议443端口**

#### 工作流程
1. 建立TCP连接(三次握手)
2. 客户端验证服务器数字证书
3. DH算法协商对称加密算法的密钥、hash算法的密钥
4. SSL安全加密隧道协商完成
5. 网页以加密的方式传输，用协商的对称加密算法和密钥加密，保证数据机密性；用协商的hash算法进行数据完整性保护，保证数据不被篡改

### 二者区别
|Kind|HTTP|HTTPS|
|-|-|--|
|传输方式|明文传输|加密|
|需要申请证书吗|x|到CA申请证书|
|页面响应速度|TCP三次握手，3个包|TCP3+SSL9=12|
|端口|80|443|
|资源耗费|common|相当于建构在SSL/TLS上的HTTP协议，更耗费服务器资源|

### TCP协议

#### 三次握手
> 建立可靠连接


|操作|客户端|服务器端|
|-|-|-|
|第一次握手|尝试连接服务器，向服务器发送syn包，syn=j，客户端进入SYN_SEND状态||
|第二次握手||接收客户端syn包并确认，ack=j+1，发送SYN包(syn=k)(SYN+ACK包),进入SYN_RECV状态|
|第三次握手|收到服务器的SYN+ACK包，向服务器发送确认包(ack=k+1)，进入ESTABLISH状态|收到ack，进入ESTABLISH状态|

#### 四次挥手

| 操作    | 客户端| 服务器端|
| ----- | ---- | -|
| 第一次挥手 | 发送连接释放报文，FIN=1，seq=u，进入FIN-WAIT-1状态| 停止发送数据|
| 第二次挥手 ||发送确认报文，ACK=1，ack=u+1，进入CLOSE-WAIT状态|
| 第三次挥手 | 进入FIN-WAIT-2状态，等待服务器发送连接释放报文| 发送连接释放报文，进入LAST-ACK状态 |
| 第四次挥手 |发送确认，ACK=1，ack=w+1，进入TIME-WAIT状态，等TCB撤销就进入CLOSED| 接收到确认报文后，进入CLOSED关闭状态 |

## 域名&端口

### 域名

IP地址：计算机唯一的逻辑地址，联网计算机都需要通过ip地址互相联系

为了方便记忆，由数字+字母构成ip的代号——域名

域名——DNS服务器——ip地址

### DNS服务器

> 域名和ip地址转换的服务器
