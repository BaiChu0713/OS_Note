## 什么是数据库

数据库（database）是用来组织、存储和管理数据的仓库。

数据的来源有很多，比如出行记录、消费记录、浏览的网页、发送的消息等等。除了文本类型的数据，图像、音乐、声音都是数据。

为了方便管理互联网世界中的数据，就有了数据库管理系统的概念（简称：数据库）。

用户可以对数据库中的数据进行新增、查询、更新、删除等操作。

## 常见的数据库及分类

市面上的数据库有很多种，最常见的数据库有如下几个：

`MySQL` 数据库（目前使用最广泛、流行度最高的开源免费数据库；Community + Enterprise）

`Oracle` 数据库（收费）

`SQL Server` 数据库（收费）

`Mongodb` 数据库（Community + Enterprise）

其中，MySQL、Oracle、SQL Server 属于传统型数据库（又叫做：关系型数据库 或 SQL 数据库），这三者的设计理念相同，用法比较类似。

而 Mongodb 属于新型数据库（又叫做：非关系型数据库 或 NoSQL 数据库），它在一定程度上弥补了传统型数据库的缺陷。

数据库的特点？

1. 持久化存储数据

数据库允许你将产品信息和订单数据持久地存储在硬盘上。这意味着即使在关机或断电后，数据也不会丢失，并且可以在需要时重新加载。

2. 方便数据检索和更新

数据库提供了强大的查询语言和索引功能，使得你可以轻松地检索和更新存储的数据。例如，你可以使用SQL查询语言来查找特定类型的产品，或者更新订单状态为已发货。

3. 保证数据完整性

数据库提供了机制来确保数据的完整性。你可以定义约束条件，例如主键约束、唯一约束和外键约束，以防止数据的重复、不一致或无效。

保证数据安全性：数据库提供了安全性功能，以确保只有授权用户可以访问数据。你可以设置访问权限和用户身份验证机制，以控制谁可以读取、写入或修改数据库中的数据。

## 传统型数据库的数据组织结构

数据的组织结构：指数据以什么样的结构进行存储。

在传统型数据库中，数据的组织结构分为`数据库(database)`、`数据表(table)`、`数据行(row)`、`字段(field)`这 4 大部分组成。

除了四大部份外数据库的组成应该还有

1. `索引`

用于快速定位和访问数据的数据结构，可以加快数据检索和查询的速度。

`  CREATE INDEX idx_customers_name ON Customers (Name); `//给予Name索引后

`SELECT * FROM Customers WHERE Name = 'John Doe';/`/用Name来作为判断信息

那么数据库就可以直接定位到索引中名为“John Doe" 的客户姓名匹配的数据行，而不需要对整个表进行全盘扫描。这样可以大大减少查询的时间和资源消耗。

2. `视图`

基于一个或多个数据表的查询结果集，可以简化复杂的数据查询和提供数据安全性。

视图一方面可以帮我们使用表的一部分而不是所有的表，另一方面也可以针对不同的用户制定不同的查询视图。

视图是一种**虚拟表**，本身是**不具有数据**的，占用很少的内存空间，它是 SQL 中的一个重要概念。

视图建立在已有表的基础上, 视图赖以建立的这些表称为基表。

3. 存储过程和触发器

用于在数据库中执行特定的操作，如数据处理、验证和约束等。

二者是数据库中的两种重要的编程对象。它们都是预先定义的数据库逻辑，可以在特定的事件或条件发生时自动执行。可以理解为数据库中的一种函数

`存储过程`是数据库中的一个独立对象，可以被调用和执行。存储过程通常用于封装和组织复杂的业务逻辑，提供重复使用和高性能的数据库操作。比如创建一个存储过程来插入一条新的客户记录，并返回插入后的客户ID：

`触发器`是与数据库表相关联的代码块，它在特定的数据操作事件（如插入、更新、删除）发生时自动触发执行。

4. 数据库管理系统（DBMS）

用于管理和操作数据库的软件系统，如MySQL、Oracle、SQL Server等。提供了一系列的功能和工具，用于创建、操作、维护和查询数据库。

## 关系型数据库与非关系型数据库

关系型数据库为了规范性，把数据分配成为最小的逻辑表来存储避免重复，获得精简的空间利用。但是多个表之间的关系限制，多表管理就有点复杂。

|kind|关系型|非关系型|
|--|-|-|
|概念|采用了关系模型来组织数据的数据库，或者说采用了二维表|非关系型的、分布式的，且一般不保证ACID的数据存储系统|
|代表|SQL Server，Oracle,Mysql,PostgreSQL|MongoDB，Redis、CouchDB|
|优点|容易理解；使用方便；易于维护|并发读写性能高，海量数据访问快，可拓展|
|劣势|海量数据的读写效率低，横向拓展性差|存储数据的类型比较简单|
|存储方式|数据库表，增加外键关联外部数据表|Key-value方式|
|事务|如果其中一张表跟新失败的话，其他表也不会更新成功。这种场景可以通过事务来控制，可以在所有命令完成之后，再统一提交事务。|没有这一概念，每一个数据集都是原子级别的|
|类型|数据表（彼此关联，容易提取）|数据集（大块存储在一起）|
|结构类型|预定义结构|动态结构|
|存储特性|规范性，把数据分配成为最小的逻辑表来存储避免重复，获得精简的空间利用|数据经常可以重复，单个数据库很少被分开，而是存储成为一个整体|
|拓展类型|纵向|横向|
|适用类型|结构化数据，增长速度可以预期|非结构化数据，模糊处理|

## 事务

**数据库就是用来存储数据，那么其中一定有改变数据的时候，事务就是在这个步骤中起作用的。**

事务是**一组逻辑操作单元，使数据从一种状态转换到另一种状态**。它是一个不可分割的工作单位，通常包含一系列的数据库操作，例如插入、更新、删除等。

它是一组操作序列，这些操作要么全部成功，要么全部失败

事务是用来确保无论发生什么情况，你使用的数据都将处于一个合理的状态

ACID属性是关系型数据库的核心特点之一————**事务的特性**

数据库事务必须具备ACID特性，分别是Atomic原子性，Consistency一致性，Isolation隔离性，Durability持久性

ACID特性确保了数据库事务的正确性、可靠性和一致性。它们提供了事务的基本保证，使得在并发执行和故障恢复的环境下，数据库能够维护数据的完整性和可靠性。

- 原子性（Atomicity）

  即不可分割性，事务中的操作要么全不做，要么全做 一个事务即使一个原子
- 一致性（Consistency）

  一个事务在执行前后，数据库都必须处于正确的状态，满足完整性约束 一致性是acid中最重要的属性，而原子性、隔离性和持久性都是作为保障一致性的手段

- 隔离性（Isolation）

  多个事务并发执行时，一个事务的执行不应影响其他事务的执行 可以理解为是锁的抢占资源，

- 持久性（Durability）

  事务处理完成后，对数据的修改就是永久的，即便系统故障也不会丢失
