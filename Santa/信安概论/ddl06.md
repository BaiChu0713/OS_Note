# 软件安全 恶意程序

## 软件安全

**软件生命周期**中，运用**系统安全工程**的技术原则，保证软件采取正确的措施以增强系统安全，确保那些使系统安全性降低的错误已经被消除

**软件安全保护**的为软件的**完整性、可用性、保密性、运行安全性**

运行安全性：

  1. 软件**自身**安全：软件**抵御外部的能力**，**代码完整、数据完整、功能完整**

  2. 软件**存储**安全：存储设置的可靠性，存储设置的加密解密

  3. 软件**通信**安全：安全**传输**，加密传输，网络安全**下载**，完整下载

  4. 软件**使用**安全：**运行环境** 完整

  5. 软件**运行**安全：**软件** 保证能够**正常运行**以及**运行正确性**

**软件保护**主要解决的问题：软件**防复制、防执行、防篡改、防暴露**

## 恶意代码

一种计算机程序，指代有恶意意图编写的软件

分类：
1. 是否驻留在宿主程序？
 - 依附于宿主程序：病毒程序/Logic炸弹/后门
 - 独立程序：蠕虫、bot

2. 是否复制？
  - 自身复制：病毒/蠕虫
  - 不复制：bot 逻辑炸弹 后门

## 计算机病毒

指**编制**或者在计算机**程序中**插入的**破坏计算机功能**或**毁坏数据**，影响计算机使用并能**自我复制**的一组计算机**指令或者程序代码**

- 计算机病毒的命名和分类

  一般格式：<病毒前缀> <病毒名> [<病毒后缀>]

  |前缀|病毒|工作原理|
  |-|-|-|
  |Trojan|木马|通过网络/系统漏洞进入 user system，然后隐藏，向外泄露用户信息/对用户进行远程控制|
  |Worm|蠕虫|通过网络/系统漏洞传播，无需用户进行特定操作即可感染用户主机|
  |Macro|宏病毒|感染Office文档|
  |Win32|Win32类病毒|感染windows OS可执行程序 *.exe\*.ddl|
  |Script|脚本病毒|使用脚本语言编写，通过网页传播|

  **病毒**一般放在**可执行文件** 的开始/结尾，关键是要保证当调用受感染文件时，**首先** 被执行的是**病毒程序**，然后是原来的程序

- 计算机病毒的构成
  - 引导模块、感染模块、破坏模块

- 反计算机病毒的方法
  - 预防、检测、识别、清除（诊断、杀毒）

## 蠕虫病毒

由包含的**程序**，经过某种**网络连接**，将**自身**从**一台计算机分发到其他计算机系统**；

传播时**无需用户干预**，不会直接破坏文件或系统，只在**计算机内存**中**自我复制**，向网络上尽可能多的计算机**发送自身副本**，导致内存overuse，**网络/本地系统资源耗尽**->最终引发拒绝服务（DoS）攻击

  ![photo](/Photos/18.png)
  ![photo](/Photos/19.png)

  ### 蠕虫病毒的特点

  1. **自我复制**：
     - 蠕虫病毒能够在受感染的计算机上自我复制，生成多个副本。
     - 这些副本会不断寻找新的目标系统进行传播。

  2. **自动传播**：
     - 蠕虫病毒通过网络连接自动传播，无需用户干预。
     - 它可以利用系统漏洞、电子邮件、即时通讯工具、文件共享等方式传播。

  3. **资源消耗**：
     - 蠕虫病毒在计算机内存中运行，不断生成副本并尝试传播。
     - 这会导致系统资源（如CPU、内存、网络带宽）被大量占用，最终导致系统性能下降，甚至崩溃。

  4. **拒绝服务**：
     - 蠕虫病毒的传播会导致网络流量剧增，消耗大量网络带宽。
     - 这可能导致网络拥塞，使合法用户无法正常访问网络资源，引发拒绝服务（DoS）攻击。

  ### 蠕虫病毒的传播方式

  1. **电子邮件**：
     - 蠕虫病毒可以通过电子邮件附件或链接传播。当用户打开附件或点击链接时，病毒会自动运行并感染系统。
     - 例如，著名的“爱虫”（ILOVEYOU）蠕虫病毒通过电子邮件传播，导致全球范围内的大规模感染。

  2. **即时通讯工具**：
     - 蠕虫病毒可以通过即时通讯工具（如QQ、MSN等）发送恶意链接或文件，诱使用户点击或下载。
     - 例如，一些蠕虫病毒会伪装成好友发送的文件或链接，用户点击后系统即被感染。

  3. **文件共享**：
     - 蠕虫病毒可以通过文件共享服务（如P2P下载、共享文件夹等）传播。
     - 例如，一些蠕虫病毒会伪装成热门文件，用户下载后系统即被感染。

  4. **系统漏洞**：
     - 蠕虫病毒可以利用系统漏洞自动传播。攻击者可以编写利用这些漏洞的代码，使蠕虫病毒在无需用户干预的情况下感染系统。
     - 例如，著名的“冲击波”（Worm.Blaster）蠕虫病毒利用了Windows操作系统的RPC漏洞进行传播。

  ### 蠕虫病毒的影响

  1. **系统性能下降**：
     - 蠕虫病毒在计算机内存中运行，不断生成副本并尝试传播，导致系统资源被大量占用。
     - 这会导致系统性能下降，甚至崩溃。

  2. **网络拥塞**：
     - 蠕虫病毒的传播会导致网络流量剧增，消耗大量网络带宽。
     - 这可能导致网络拥塞，使合法用户无法正常访问网络资源。

  3. **数据泄露**：
     - 一些蠕虫病毒可能会携带恶意代码，窃取用户的敏感信息，如用户名、密码、信用卡信息等。
     - 例如，一些蠕虫病毒会记录用户的键盘输入，窃取用户的登录信息。

  4. **拒绝服务**：
     - 蠕虫病毒的传播会导致网络流量剧增，消耗大量网络带宽。
     - 这可能导致网络拥塞，使合法用户无法正常访问网络资源，引发拒绝服务（DoS）攻击。

  ### 防范措施

  1. **安装和更新防病毒软件**：
     - 安装可靠的防病毒软件，并定期更新病毒库，以检测和阻止蠕虫病毒。
     - 例如，使用 Norton、McAfee、Kaspersky 等防病毒软件。

  2. **定期更新系统和应用程序**：
     - 定期更新操作系统和应用程序，修复已知的安全漏洞。
     - 例如，使用 Windows Update 或 Mac App Store 更新系统和应用程序。

  3. **谨慎处理电子邮件附件和链接**：
     - 不要轻易打开未知来源的电子邮件附件或点击链接。
     - 例如，如果收到一封来自陌生人的电子邮件，要求你打开附件或点击链接，应立即删除该邮件。

  4. **使用防火墙**：
     - 配置防火墙，限制未经授权的网络访问。
     - 例如，使用 Windows 防火墙或第三方防火墙软件。

  5. **启用入侵检测系统（IDS）**：
     - 配置入侵检测系统（IDS），实时监控网络流量，检测和阻止异常行为。
     - 例如，使用 Snort 或 Suricata 等 IDS 工具。

  6. **教育用户**：
     - 教育用户识别和避免恶意行为，提高安全意识。
     - 例如，定期组织安全培训，教育用户如何识别和避免网络钓鱼攻击。

  ### 总结
  蠕虫病毒是一种能够自我复制并自动传播的恶意程序，通过网络连接将自身从一台计算机分发到其他计算机系统。它在传播过程中无需用户干预，通常会在计算机内存中自我复制，向网络上的其他计算机发送自身副本，导致系统资源耗尽，最终引发拒绝服务（DoS）攻击。通过安装和更新防病毒软件、定期更新系统和应用程序、谨慎处理电子邮件附件和链接、使用防火墙和入侵检测系统等措施，可以有效防范蠕虫病毒的攻击。


## 特洛伊木马

![photo](/Photos/20.png)

特洛伊木马是一种恶意软件，其名称来源于古希腊神话中的特洛伊木马故事。在神话中，希腊人建造了一个巨大的木马，将士兵藏在其中，特洛伊人将木马带入城中，希腊士兵趁夜从木马中出来，打开城门，导致特洛伊城被攻陷。

在网络安全领域，特洛伊木马的工作原理类似，攻击者通过**伪装成合法的软件或文件**，诱使用户安装或运行，从而**在用户的系统中植入恶意代码**，以实现**非法访问、数据窃取、系统破坏**等目的。

### 特洛伊木马的工作原理

#### 1. **伪装与传播**
1. **伪装**：
   - 特洛伊木马通常伪装成合法的软件、文件或应用程序，例如伪装成免费软件、系统更新、游戏、媒体文件等，以吸引用户下载和安装。
   - 例如，攻击者可能会将特洛伊木马伪装成一个流行的软件更新，诱使用户下载并安装。

2. **传播**：
   - 攻击者通过多种渠道传播特洛伊木马，包括电子邮件附件、恶意网站、社交媒体、文件共享平台等。
   - 例如，攻击者可能会通过电子邮件发送一个伪装成合法文件的附件，诱使用户打开附件，从而触发特洛伊木马的安装。

#### 2. **安装与隐藏**
1. **安装**：
   - 当用户运行伪装的文件时，特洛伊木马会在用户的系统中安装恶意代码。这些代码通常会在系统启动时自动运行，并**隐藏在系统进程**中。
   - 例如，特洛伊木马可能会在用户的启动项中添加一个恶意程序，确保每次系统启动时自动运行。

2. **隐藏**：
   - 特洛伊木马会采取各种手段隐藏自己的存在，例如**修改系统注册表、隐藏文件、使用根套（rootkit）技术**等，以避免被用户或安全软件发现。
   - 例如，特洛伊木马可能会将**自身文件隐藏在系统目录**中，并修改注册表项，使其在任务管理器中不可见。

#### 3. **恶意行为**
1. **远程控制**：
   - 特洛伊木马可以允许攻击者远程控制用户的系统，执行各种操作，如打开摄像头、麦克风、记录键盘输入、下载和安装其他恶意软件等。
   - 例如，攻击者可以通过远程控制功能，实时查看用户的屏幕操作，甚至控制用户的鼠标和键盘。

2. **数据窃取**：
   - 特洛伊木马可以窃取用户的敏感信息，如用户名、密码、信用卡信息、个人文件等，并将这些信息发送给攻击者。
   - 例如，特洛伊木马可以通过键盘记录功能，记录用户输入的密码，并将这些信息发送给攻击者。

3. **系统破坏**：
   - 特洛伊木马可以破坏用户的系统，删除文件、格式化硬盘、修改系统设置等，导致系统无法正常运行。
   - 例如，特洛伊木马可以删除系统关键文件，导致系统无法启动。

4. **分布式拒绝服务攻击（DDoS）**：
   - 特洛伊木马可以将用户的系统变成僵尸网络的一部分，用于发起分布式拒绝服务攻击，攻击其他目标系统。
   - 例如，攻击者可以控制大量感染特洛伊木马的系统，同时向目标系统发送大量请求，导致目标系统无法正常响应。

### 特洛伊木马的类型

1. **远程访问特洛伊木马（RAT）**：
   - **功能**：允许攻击者远程访问和控制用户的系统，执行各种操作，如文件操作、屏幕截图、键盘记录等。
   - **例子**：DarkComet、njRAT等。

2. **信息窃取特洛伊木马**：
   - **功能**：专门用于窃取用户的敏感信息，如用户名、密码、信用卡信息等。
   - **例子**：Zeus、SpyEye等。

3. **银行特洛伊木马**：
   - **功能**：专门针对在线银行用户，窃取用户的银行账户信息和交易密码。
   - **例子**：Emotet、TrickBot等。

4. **勒索软件特洛伊木马**：
   - **功能**：加密用户的文件，要求用户支付赎金以获取解密密钥。
   - **例子**：WannaCry、Petya等。

5. **下载器特洛伊木马**：
   - **功能**：下载和安装其他恶意软件，如广告软件、间谍软件等。
   - **例子**：Adload、InstallCore等。

### 特洛伊木马的传播方式

1. **电子邮件附件**：
   - 攻击者通过电子邮件发送伪装成合法文件的附件，诱使用户打开附件，从而触发特洛伊木马的安装。
   - 例如，攻击者可能会发送一个伪装成发票或合同的PDF文件，用户打开后系统即被感染。

2. **恶意网站**：
   - 攻击者通过恶意网站，利用浏览器漏洞或诱导用户下载恶意文件，从而传播特洛伊木马。
   - 例如，攻击者可能会创建一个伪装成合法软件下载网站的恶意网站，用户下载并安装软件后系统即被感染。

3. **社交媒体**：
   - 攻击者通过社交媒体平台，发送伪装成合法链接或文件的恶意内容，诱使用户点击或下载。
   - 例如，攻击者可能会通过社交媒体发送一个伪装成有趣视频的链接，用户点击后系统即被感染。

4. **文件共享平台**：
   - 攻击者通过文件共享平台，上传伪装成合法文件的恶意文件，诱使用户下载。
   - 例如，攻击者可能会在文件共享平台上上传一个伪装成热门电影的恶意文件，用户下载并打开后系统即被感染。

### 特洛伊木马的影响

1. **数据泄露**：
   - 特洛伊木马可以窃取用户的敏感信息，如用户名、密码、信用卡信息、个人文件等，并将这些信息发送给攻击者。
   - 例如，攻击者可以通过特洛伊木马窃取用户的银行账户信息，导致用户遭受经济损失。

2. **系统破坏**：
   - 特洛伊木马可以破坏用户的系统，删除文件、格式化硬盘、修改系统设置等，导致系统无法正常运行。
   - 例如，特洛伊木马可以删除系统关键文件，导致系统无法启动。

3. **隐私侵犯**：
   - 特洛伊木马可以打开用户的摄像头和麦克风，记录用户的活动，侵犯用户的隐私。
   - 例如，攻击者可以通过特洛伊木马实时查看用户的摄像头画面，侵犯用户的隐私。

4. **网络攻击**：
   - 特洛伊木马可以将用户的系统变成僵尸网络的一部分，用于发起分布式拒绝服务攻击，攻击其他目标系统。
   - 例如，攻击者可以控制大量感染特洛伊木马的系统，同时向目标系统发送大量请求，导致目标系统无法正常响应。

### 防范措施

1. **安全意识**：
   - 提高用户的安全意识，避免下载和安装来源不明的软件和文件。
   - 例如，用户应避免点击不明链接或下载不明附件，特别是来自不可信来源的邮件。

2. **使用安全软件**：
   - 安装可靠的防病毒软件和反恶意软件工具，定期更新病毒库，以检测和阻止特洛伊木马。
   - 例如，使用 Norton、McAfee、Kaspersky 等防病毒软件。

3. **系统更新**：
   - 定期更新操作系统和应用程序，修复已知的安全漏洞。
   - 例如，使用 Windows Update 或 Mac App Store 更新系统和应用程序。

4. **备份数据**：
   - 定期备份重要数据，以便在系统被特洛伊木马破坏时能够恢复数据。
   - 例如，使用外部硬盘或云存储服务备份重要文件。

5. **网络监控**：
   - 使用网络监控工具，检测异常的网络活动，及时发现和阻止特洛伊木马的通信。
   - 例如，使用防火墙和入侵检测系统（IDS）监控网络流量，检测异常行为。

## bot
![photo](/Photos/21.png)

**Bot**（机器人程序）是一种自动化的软件程序，能够执行各种任务，这些任务通常由人类用户手动完成。

Bot可以用于合法和有益的目的，也可以被用于恶意目的。在网络安全领域，Bot通常指那些被攻击者控制的恶意程序，用于执行各种自动化攻击活动。

### Bot的主要类型

#### 1. **合法Bot**
合法Bot是指那些用于自动化任务的程序，这些任务对用户或系统有益。常见的合法Bot包括：

- **搜索引擎爬虫（Web Crawler）**：
  - **定义**：搜索引擎爬虫是一种自动化的程序，用于浏览互联网上的网页，收集信息并建立索引。
  - **用途**：帮助搜索引擎（如Google、Bing）更新其搜索结果，提供更准确的搜索体验。
  - **例子**：Googlebot是Google的爬虫，定期访问网站并抓取内容。

- **聊天机器人（Chatbot）**：
  - **定义**：聊天机器人是一种自动化的程序，能够与用户进行自然语言对话。
  - **用途**：提供客户服务支持、自动化回答常见问题、提供信息查询等。
  - **例子**：许多公司使用聊天机器人来处理客户咨询，如银行、电商平台等。

- **自动化脚本（Automated Script）**：
  - **定义**：自动化脚本是一种用于自动化重复性任务的程序。
  - **用途**：自动化文件处理、数据备份、系统维护等。
  - **例子**：使用Python脚本自动化数据处理任务。

#### 2. **恶意Bot**
恶意Bot是指那些被攻击者控制的程序，用于执行各种自动化攻击活动。常见的恶意Bot包括：

- **僵尸网络Bot（Botnet）**：
  - **定义**：僵尸网络Bot是一种被攻击者控制的恶意程序，用于将大量受感染的计算机组成一个网络（僵尸网络），并执行攻击活动。
  - **用途**：发起分布式拒绝服务攻击（DDoS）、发送垃圾邮件、窃取敏感信息等。
  - **例子**：Mirai Botnet是一个著名的僵尸网络，用于发起大规模的DDoS攻击。

- **恶意爬虫（Malicious Crawler）**：
  - **定义**：恶意爬虫是一种用于自动化抓取网页内容的程序，但其行为对目标网站有害。
  - **用途**：窃取网站内容、爬取用户数据、进行网络扫描等。
  - **例子**：一些恶意爬虫会爬取电商网站的商品信息，用于价格比较或数据挖掘。

- **恶意聊天机器人（Malicious Chatbot）**：
  - **定义**：恶意聊天机器人是一种用于欺骗用户或收集用户信息的程序。
  - **用途**：通过伪装成合法的聊天机器人，诱使用户提供敏感信息，如用户名、密码等。
  - **例子**：一些恶意聊天机器人会在社交媒体上与用户互动，获取用户的个人信息。

### Bot的工作原理

#### 1. **合法Bot的工作原理**
- **搜索引擎爬虫**：
  - **工作方式**：爬虫从一个或多个起始页面开始，通过超链接逐步访问其他页面，抓取网页内容并存储在本地数据库中。
  - **索引**：抓取的内容被索引，以便搜索引擎能够快速响应用户的查询请求。
  - **更新**：定期更新索引，确保搜索结果的准确性和时效性。

- **聊天机器人**：
  - **工作方式**：聊天机器人通过自然语言处理（NLP）技术，理解用户的输入并生成相应的回答。
  - **交互**：与用户进行实时对话，提供信息查询、问题解答等服务。
  - **学习**：一些聊天机器人可以通过机器学习算法，不断优化回答质量。

- **自动化脚本**：
  - **工作方式**：自动化脚本通过编程语言（如Python、Shell）编写，执行特定的任务。
  - **任务**：可以是文件处理、数据备份、系统维护等。
  - **调度**：通常通过任务调度器（如cron）定期运行。

#### 2. **恶意Bot的工作原理**
- **僵尸网络Bot**：
  - **感染**：攻击者通过各种手段（如电子邮件附件、恶意网站）将恶意代码植入用户的计算机。
  - **控制**：受感染的计算机（僵尸主机）通过网络连接到攻击者的控制服务器（C2服务器）。
  - **攻击**：攻击者通过C2服务器发送指令，控制僵尸主机执行攻击活动，如DDoS攻击、发送垃圾邮件等。

- **恶意爬虫**：
  - **扫描**：恶意爬虫通过网络扫描，寻找目标网站的漏洞。
  - **抓取**：抓取目标网站的内容，窃取敏感信息。
  - **攻击**：利用抓取的信息进行进一步的攻击，如数据泄露、网络钓鱼等。

### 恶意Bot的影响

1. **数据泄露**：
   - 恶意Bot可以窃取用户的敏感信息，如用户名、密码、信用卡信息等。
   - 例如，恶意爬虫可以抓取电商网站的用户数据，用于非法目的。

2. **系统破坏**：
   - 恶意Bot可以破坏用户的系统，删除文件、格式化硬盘、修改系统设置等。
   - 例如，僵尸网络Bot可以控制大量受感染的计算机，发起DDoS攻击，导致目标系统无法正常响应。

3. **隐私侵犯**：
   - 恶意Bot可以打开用户的摄像头和麦克风，记录用户的活动，侵犯用户的隐私。
   - 例如，恶意聊天机器人可以通过伪装成合法的聊天机器人，诱使用户提供敏感信息。

4. **网络攻击**：
   - 恶意Bot可以将用户的系统变成僵尸网络的一部分，用于发起分布式拒绝服务攻击，攻击其他目标系统。
   - 例如，Mirai Botnet通过控制大量IoT设备，发起大规模的DDoS攻击。

### 防范措施

1. **安全意识**：
   - 提高用户的安全意识，避免下载和安装来源不明的软件和文件。
   - 例如，用户应避免点击不明链接或下载不明附件，特别是来自不可信来源的邮件。

2. **使用安全软件**：
   - 安装可靠的防病毒软件和反恶意软件工具，定期更新病毒库，以检测和阻止恶意Bot。
   - 例如，使用 Norton、McAfee、Kaspersky 等防病毒软件。

3. **系统更新**：
   - 定期更新操作系统和应用程序，修复已知的安全漏洞。
   - 例如，使用 Windows Update 或 Mac App Store 更新系统和应用程序。

4. **备份数据**：
   - 定期备份重要数据，以便在系统被恶意Bot破坏时能够恢复数据。
   - 例如，使用外部硬盘或云存储服务备份重要文件。

5. **网络监控**：
   - 使用网络监控工具，检测异常的网络活动，及时发现和阻止恶意Bot的通信。
   - 例如，使用防火墙和入侵检测系统（IDS）监控网络流量，检测异常行为。

6. **限制访问**：
   - 配置访问控制列表（ACL），限制未经授权的访问。
   - 例如，限制某些IP地址或网络的访问权限，防止恶意Bot的攻击。
